<p *ngIf="!persona">"{{persona.name}}" not found!</p>
<div id="personaPage" *ngIf="persona" style="margin-top:10px">
    <h2>{{persona.name}} ({{persona.level}} / {{persona.getArcanaName()}})</h2>

    <div id="personaInfo" *ngIf='persona.max || persona.item || persona.rare || persona.note || persona.dlc'>
        <h3>Note</h3>
        <span style='color: red;' *ngIf='persona.max'>Social link must be maxed!</span>
        <span style='color: slateblue;' *ngIf='persona.rare'>This is a rare persona and cannot be fused!</span>
        <span style='color: slateblue;' *ngIf='persona.note'>{{persona.note}}</span>
        <span style='color: slateblue;' *ngIf='persona.dlc'>This is a DLC persona!</span>
    </div>

    <h3>Stats</h3>
    <table id="statsTable" class="ui table unstackable striped">
        <thead>
        <tr>
            <th *ngFor="let stat of statNames">{{stat}}</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td *ngFor="let stat of persona.stats">{{stat}}</td>
        </tr>
        </tbody>
    </table>

    <h3>Elementals</h3>
    <table id="fullElemTable" class="ui table unstackable striped mobile-hidden-1 elem-table">
        <thead>
        <tr>
            <th *ngFor="let elem of elemNames">{{elem}}</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td *ngFor="let elem of persona.elems" class="{{persona.getElemFull(elem)}}">{{persona.getElemFull(elem)}}</td>
        </tr>
        </tbody>
    </table>

    <!--split the table into 2 for mobile-->
    <table class="ui table unstackable striped desktop-hidden elem-table">
        <thead>
        <tr>
            <th *ngFor="let elem of elemNames | slice:0:5">{{elem}}</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td *ngFor="let elem of persona.elems | slice:0:5" class="{{persona.getElemFull(elem)}}">{{persona.getElemFull(elem)}}</td>
        </tr>
        </tbody>
    </table>

    <table class="ui table unstackable striped desktop-hidden elem-table">
        <thead>
        <tr>
            <th *ngFor="let elem of elemNames | slice:5:10">{{elem}}</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td *ngFor="let elem of persona.elems | slice:5:10" class="{{persona.getElemFull(elem)}}">{{persona.getElemFull(elem)}}</td>
        </tr>
        </tbody>
    </table>

    <h3>Skills</h3>
    <table id="skillTable" class="ui table unstackable striped">
        <thead>
        <tr>
            <th>Level</th>
            <th>Type</th>
            <th>Name</th>
            <th>Effect</th>
            <th>Cost</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let skill of persona.skills">
            <td>{{skill.level}}</td>
            <td>{{skill.skill.getSkillElement()}}</td>
            <td><a href="#/skill/{{skill.skill.id}}">{{skill.skill.name}}</a></td>
            <td>{{skill.skill.description}}</td>
            <td>{{skill.skill.formatCost()}}</td>
        </tr>
        </tbody>
    </table>

    <h3>Negotiation Drops</h3>
    <table id="negotiationTable" class="ui table unstackable striped">
        <thead>
        <tr>
            <th>Win Difference</th>
            <th>Item</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let negot of persona.negotiates">
            <td>{{negot.rollWinDisplay}}</td>
            <td class="left-border">
                <a *ngIf="negot.item.itemId != 0" href="#/item/{{negot.item.itemId}}">{{negot.name}}</a>
                <a *ngIf="negot.item.itemId == 0">{{negot.name}}</a>
            </td>
        </tr>
        </tbody>
    </table>

    <h3>Drops</h3>
    <table id="dropTable" class="ui table unstackable striped">
        <thead>
        <tr>
            <th>Roll</th>
            <th>Item</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let drop of persona.drops">
            <td>{{drop.rollWinDisplay}}</td>
            <td class="left-border"><a href="#/item/{{drop.itemId}}">{{drop.name}}</a></td>
        </tr>
        </tbody>
    </table>

    <h3>Transmutations</h3>
    <table id="transmuteTable" class="ui table unstackable striped">
        <thead>
        <tr>
            <th *ngFor="let transmute of transmutationsHeader">{{transmute}}</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td class="left-border" *ngFor="let transmute of persona.transmutes"><a href="#/item/{{transmute.itemId}}">{{transmute.name}}</a></td>
        </tr>
        </tbody>
    </table>

    <h3>Fusion to this persona ({{fusionsTo.length}} Recipes)</h3>

    <div *ngIf="!persona.special && !persona.rare">
        <p><b>Note</b>: Don't get the same results? Remember to configure which DLC persona you own
            in <a href="#/setting/">Setting</a>.</p>
        <p>Also, remember that rare persona fusion depends on your persona's current level.</p>
    </div>

    <div class="caption">
        <div class="pagination" *ngIf="fusionsToDisplay.length > perPage">
            <span (click)="toPageNum = 0">&#x25c4;<span style="position: relative; left: -0.4em;">&#x25c4;</span></span>
            <span (click)="toPageNum = toPageNum - 1">&#x25c4;</span>
            Page {{toPageNum + 1}} / {{Math.ceil(fusionsTo.length / perPage)}}
            <span (click)="toPageNum = toPageNum + 1">&#x25ba;</span>
            <span (click)="toPageNum = Math.ceil(fusionsToDisplay.length / perPage)"><span style="position: relative; right: -0.4em;">&#x25ba;</span>&#x25ba;</span>
        </div>
    </div>

    <div class="ui mini input">
        <label class="ui-mini-label">
          Filter:
          <input #toFilter autocorrect="off" autocomplete="off" spellcheck="false" (keyup.enter)="filterToStr(toFilter.value)">
        </label>
        <button (click)="filterToStr('')" class="ui mini button">Clear</button>
    </div>

    <table id="recipesToTable" class="ui table unstackable striped recipe-table">
        <thead>
        <tr>
            <th>#</th>
            <th>Cost</th>
            <th colspan="6">Ingredients</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let recipe of fusionsToDisplay;index as i">
            <td>{{i + 1}}</td>
            <td>¥{{recipe.cost | number}}</td>
            <td *ngFor="let persona of recipe.sources">
                <a href='/persona/{{persona.id}}'>{{persona.name}}</a>
                ({{persona.level}} / {{persona.getArcanaName()}})
            </td>
        </tr>
        </tbody>
    </table>

    <h3>Fusion from this persona ({{fusionsFrom.length}} Recipes)</h3>

    <div>
        <p><b>Note</b>: Don't get the same results? Remember to configure which DLC persona you own
            in <a href="#/setting/">Setting</a>.</p>
        <p>Also, remember that rare persona fusion depends on your persona's current level.</p>
    </div>

    <div class="caption">
        <div class="pagination" *ngIf="fusionsFromDisplay.length > perPage">
            <span (click)="fromPageNum = 0">&#x25c4;<span style="position: relative; left: -0.4em;">&#x25c4;</span></span>
            <span (click)="fromPageNum = fromPageNum - 1">&#x25c4;</span>
            Page {{fromPageNum + 1}} / {{Math.ceil(fusionsfrom.length / perPage)}}
            <span (click)="fromPageNum = fromPageNum + 1">&#x25ba;</span>
            <span (click)="fromPageNum = Math.ceil(fusionsfromDisplay.length / perPage)"><span style="position: relative; right: -0.4em;">&#x25ba;</span>&#x25ba;</span>
        </div>
    </div>


    <div class="ui mini input">
        <label class="ui-mini-label">
          Filter:
          <input #fromFilter autocorrect="off" autocomplete="off" spellcheck="false" (keyup.enter)="filterFromStr(fromFilter.value)">
        </label>
        <button (click)="filterFromStr('')" class="ui mini button">Clear</button>
    </div>

    <table id="recipesFromTable" class="ui table unstackable striped recipe-table">
        <thead>
        <tr>
            <th>#</th>
            <th>Cost</th>
            <th>Fuse with</th>
            <th>Result</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let recipe of fusionsFromDisplay; index as i">
            <td>{{i + 1}}</td>
            <td>¥{{recipe.cost | number}}</td>
            <td>
                <a href='/persona/{{recipe.sources[1].id}}'>{{recipe.sources[1].name}}</a>
                ({{recipe.sources[1].level}} / {{recipe.sources[1].getArcanaName()}})
            </td>
            <td>
                <a href='/persona/{{recipe.result.id}}'>{{recipe.result.name}}</a>
                ({{recipe.result.level}} / {{recipe.result.getArcanaName()}})
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div id="footer"></div>
